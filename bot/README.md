# ü§ñ Telegram Bot - Phuket Tours (@phuketgos_bot)

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ production (Webhook —Ä–µ–∂–∏–º)  
**URL**: https://small-robinia-phukeo-8b5e1e16.koyeb.app  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 10 –Ω–æ—è–±—Ä—è 2025 –≥.

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –¢–µ—Å—Ç –±–æ—Ç–∞:
–û—Ç–∫—Ä–æ–π—Ç–µ: [@phuketgos_bot](https://t.me/phuketgos_bot) ‚Üí –Ω–∞–ø–∏—à–∏—Ç–µ `/start`

### Health check:
```bash
curl https://small-robinia-phukeo-8b5e1e16.koyeb.app/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","bot":"running",...}
```

### Webhook —Å—Ç–∞—Ç—É—Å:
```bash
curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"
# pending_update_count –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0
```

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã:
- `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏
- `/tours` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 22 —Ç—É—Ä–æ–≤
- `/help` ‚Äî –ø–æ–º–æ—â—å
- `/getid` ‚Äî —É–∑–Ω–∞—Ç—å ID –≥—Ä—É–ø–ø—ã (–≤ –≥—Ä—É–ø–ø–∞—Ö)
- `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã (–≤ –≥—Ä—É–ø–ø–∞—Ö)

### Deep Links —Ç—É—Ä–æ–≤:
```
https://t.me/phuketgos_bot?start=phiphi2days
https://t.me/phuketgos_bot?start=pearls
https://t.me/phuketgos_bot?start=jamesbond
```

### –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
- –í—ã–±–æ—Ä –¥–∞—Ç—ã
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∑—Ä–æ—Å–ª—ã—Ö/–¥–µ—Ç–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ @Phuketga

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Node.js** 20 (Alpine)
- **Telegraf** 4.16.3
- **Express** 4.18.2 (Webhook server)
- **Docker** + **Koyeb** (Singapore)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Webhook (–Ω–µ Polling!)
```
Telegram ‚Üí POST https://.../telegram-webhook ‚Üí Express ‚Üí Bot
```

---

## üìã –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
cd bot
npm install
```

### –ó–∞–ø—É—Å–∫ (—Ç—Ä–µ–±—É–µ—Ç ngrok):
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: ngrok
ngrok http 8000

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –±–æ—Ç
export BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
export PORT=8000
export WEBHOOK_DOMAIN="abc123.ngrok.io"
npm start
```

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Koyeb

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π:
```bash
git add bot/
git commit -m "feat: –æ–±–Ω–æ–≤–∏–ª –±–æ—Ç"
git push
```

### –†—É—á–Ω–æ–π:
1. https://app.koyeb.com
2. Services ‚Üí island-travel-echo-clone
3. –ö–Ω–æ–ø–∫–∞ "Redeploy"

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md](–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md)** - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- **[KOYEB_DEPLOY_INSTRUCTIONS.md](KOYEB_DEPLOY_INSTRUCTIONS.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ Deployment: b800b8e3 (Healthy)
- ‚úÖ Webhook –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ Health checks –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ Instance: 1 of 1 running

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ**
- ‚òéÔ∏è **–ö–æ–Ω—Ç–∞–∫—Ç—ã** ‚Äî —Å–ø–æ—Å–æ–±—ã —Å–≤—è–∑–∏

### **–£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:**
- "—Ü–µ–Ω–∞", "—Å—Ç–æ–∏–º–æ—Å—Ç—å" ‚Üí —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥
- "–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å", "–∑–∞–∫–∞–∑–∞—Ç—å" ‚Üí –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- "–∫–æ–Ω—Ç–∞–∫—Ç", "—Å–≤—è–∑—å" ‚Üí –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üöÄ **Deploy –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–ø—Ä–æ–¥–∞–∫—à–Ω)**

### **–í–∞—Ä–∏–∞–Ω—Ç A: PM2 (Node.js —Å–µ—Ä–≤–µ—Ä)**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PM2
npm install -g pm2

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
pm2 start welcome-message.js --name phuket-bot

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
pm2 startup
pm2 save

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 status
pm2 logs phuket-bot
```

### **–í–∞—Ä–∏–∞–Ω—Ç B: Docker**

–°–æ–∑–¥–∞–π `Dockerfile`:
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install --production
COPY . .
CMD ["node", "welcome-message.js"]
```

–ó–∞–ø—É—Å–∫:
```bash
docker build -t phuket-bot .
docker run -d --env-file .env --name phuket-bot phuket-bot
```

### **–í–∞—Ä–∏–∞–Ω—Ç C: Heroku (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Heroku CLI
heroku login
heroku create phuket-bot

# –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω
heroku config:set BOT_TOKEN=your_token

# Deploy
git push heroku main
```

---

## üìä **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏**

### **1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

–í `welcome-message.js` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –±–ª–æ–∫:
```javascript
// üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô
```

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞:
```
/stats ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### **2. –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**

–í `.env` –¥–æ–±–∞–≤—å —Å–≤–æ–π ID:
```
ADMIN_ID=—Ç–≤–æ–π_telegram_id
```

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏:
```
/broadcast –ü—Ä–∏–≤–µ—Ç! –ù–æ–≤—ã–π —Ç—É—Ä —Å–æ —Å–∫–∏–¥–∫–æ–π 20%!
```

### **3. Webhook –≤–º–µ—Å—Ç–æ polling**

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook:

```javascript
// –ó–∞–º–µ–Ω–∏ bot.launch() –Ω–∞:
const express = require('express');
const app = express();

app.use(bot.webhookCallback('/webhook'));
bot.telegram.setWebhook('https://your-server.com/webhook');

app.listen(3000, () => console.log('Webhook running'));
```

---

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **1. –õ–æ–∫–∞–ª—å–Ω–æ:**
```bash
node welcome-message.js
```

–û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–ø–∏—à–∏ `/start`

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥:**
```
/start    ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/tours    ‚Äî —Å–ø–∏—Å–æ–∫ —Ç—É—Ä–æ–≤
/help     ‚Äî –ø–æ–º–æ—â—å
/contacts ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç—ã
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–æ–∫:**
- –ù–∞–∂–º–∏ "üó∫Ô∏è –û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Ç—É—Ä–æ–≤"
- –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è Mini App –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ

---

## ‚ö†Ô∏è **–í–∞–∂–Ω–æ!**

### **1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚ùå **–ù–ï –ö–û–ú–ú–ò–¢–¨** —Ñ–∞–π–ª `.env` –≤ Git!
- ‚úÖ –î–æ–±–∞–≤—å `.env` –≤ `.gitignore`

### **2. Rate Limits:**
Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç:
- 30 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- 20 —Ä–∞—Å—Å—ã–ª–æ–∫ –≤ –º–∏–Ω—É—Ç—É

### **3. –¢–æ–∫–µ–Ω –±–æ—Ç–∞:**
–ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω:
```
@BotFather ‚Üí /newbot ‚Üí —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
```

---

## üì± **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–π—Ç–æ–º**

–ë–æ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–±–æ—Ç—É —Å:
- ‚úÖ `https://phukeo.com/#/` ‚Äî —Å–∞–π—Ç —Å —Ç—É—Ä–∞–º–∏
- ‚úÖ `https://t.me/phuketgos_bot/app` ‚Äî Mini App —Å—Å—ã–ª–∫–∞

–í—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Å–∞–π—Ç–∞ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram!

---

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤** ‚Äî –∏–∑–º–µ–Ω–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–¥ —Å–µ–±—è
2. **–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏** ‚Äî `ctx.replyWithPhoto()`
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ –±–∞–∑—É
4. **Telegram Payments** ‚Äî –ø—Ä–∏—ë–º –æ–ø–ª–∞—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

---

**–í–æ–ø—Ä–æ—Å—ã? –ü–∏—à–∏ –≤ —á–∞—Ç!** üöÄ
