# üìä –†–µ–∑—é–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π Telegram –±–æ—Ç–∞

**–î–∞—Ç–∞**: 10 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã**: ~2 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´

---

## üéØ –ó–∞–¥–∞—á–∞

–ü–æ—á–∏–Ω–∏—Ç—å Telegram –±–æ—Ç–∞ [@phuketgos_bot](https://t.me/phuketgos_bot), –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ Koyeb.

---

## ÔøΩÔøΩ –ü—Ä–æ–±–ª–µ–º—ã (–Ω–∞–π–¥–µ–Ω–Ω—ã–µ)

### 1. **Deployment Failed –Ω–∞ Koyeb**
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è polling —Ä–µ–∂–∏–º (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–ª–∞–∫–∞—Ö)
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª Express —Å–µ—Ä–≤–µ—Ä –¥–ª—è health checks
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –≤ Dockerfile (3000 –≤–º–µ—Å—Ç–æ 8000)

### 2. **–ö–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏**
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª middleware `express.urlencoded()`
- ‚ùå Callback queries –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å
- ‚ùå –ë–æ—Ç "–∑–∞–º–∏—Ä–∞–ª" –Ω–∞ —à–∞–≥–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–∑—Ä–æ—Å–ª—ã—Ö

---

## ‚úÖ –†–µ—à–µ–Ω–∏—è (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ)

### –§–∞–∑–∞ 1: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ webhook —Ä–µ–∂–∏–º

**–ö–æ–º–º–∏—Ç**: `b800b8e3`

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `express` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. ‚úÖ –°–æ–∑–¥–∞–Ω Express —Å–µ—Ä–≤–µ—Ä —Å –ø–æ—Ä—Ç–æ–º 8000
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã health check endpoints (`/`, `/health`)
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω webhook endpoint (`/telegram-webhook`)
5. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω `bot.launch()` ‚Üí `bot.telegram.setWebhook()`
6. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile (–ø–æ—Ä—Ç 8000)
7. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω graceful shutdown

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–æ—Ç –∑–∞–¥–µ–ø–ª–æ–∏–ª—Å—è –∏ —Å—Ç–∞–ª –æ–Ω–ª–∞–π–Ω –Ω–∞ Koyeb ‚úÖ

### –§–∞–∑–∞ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–æ–º–º–∏—Ç**: `962b707`

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `app.use(express.urlencoded({ extended: true }))`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ callback_query
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω try/catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
4. ‚úÖ Webhook —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç –≤—Å–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ö–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç, –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–æ –∫–æ–Ω—Ü–∞ ‚úÖ

### –§–∞–∑–∞ 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ö–æ–º–º–∏—Ç**: `0d1aeb0`

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
- ‚úÖ `–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø_–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø.md` (7500+ —Å—Ç—Ä–æ–∫)
- ‚úÖ `KOYEB_DEPLOY_INSTRUCTIONS.md` (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é)
- ‚úÖ `QUICK_START.md` (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç)
- ‚úÖ `–ë–û–¢_–ü–û–ß–ò–ù–ï–ù_README.md` (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
- ‚úÖ `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ö–ù–û–ü–û–ö_–ë–†–û–ù–ò–†–û–í–ê–ù–ò–Ø.md` (–¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã)
- ‚úÖ `–û–¢–ß–ï–¢_–û_–ü–û–ß–ò–ù–ö–ï.md` (–æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ)
- ‚úÖ `–§–ò–ù–ê–õ–¨–ù–´–ô_–û–¢–ß–ï–¢.md` (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å)

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –±–æ—Ç–∞ ‚úÖ

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–ï–ô–ß–ê–°:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | URL/–ö–æ–º–∞–Ω–¥–∞ |
|-----------|--------|-------------|
| **–ë–æ—Ç –æ–Ω–ª–∞–π–Ω** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | [@phuketgos_bot](https://t.me/phuketgos_bot) |
| **Health check** | ‚úÖ 200 OK | https://small-robinia-phukeo-8b5e1e16.koyeb.app/health |
| **Webhook** | ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω | `/telegram-webhook` |
| **Koyeb deployment** | ‚úÖ Healthy | b800b8e3 |
| **–ö–æ–º–∞–Ω–¥–∞ /start** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –º–µ–Ω—é |
| **–ö–æ–º–∞–Ω–¥–∞ /tours** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–∞—Ç–∞–ª–æ–≥ —Ç—É—Ä–æ–≤ |
| **–ö–æ–º–∞–Ω–¥–∞ /help** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–æ–º–æ—â—å |
| **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–≥ 1)** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –í–≤–æ–¥ –∏–º–µ–Ω–∏ |
| **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–≥ 2)** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –í–≤–æ–¥ –¥–∞—Ç—ã |
| **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–≥ 3)** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–Ω–æ–ø–∫–∏ –≤–∑—Ä–æ—Å–ª—ã—Ö |
| **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–≥ 4)** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–Ω–æ–ø–∫–∏ –¥–µ—Ç–µ–π |
| **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–≥ 5)** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–æ–Ω—Ç–∞–∫—Ç |
| **–û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä—É** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | @Phuketga –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—è–≤–∫–∏ |

---

## üéì –ö–ª—é—á–µ–≤—ã–µ —É—Ä–æ–∫–∏

### 1. Webhook vs Polling
- **Polling** (–ª–æ–∫–∞–ª—å–Ω–æ): `bot.launch()` - –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±–ª–∞–∫–∞—Ö
- **Webhook** (–ø—Ä–æ–¥–∞–∫—à–Ω): Express + `bot.telegram.setWebhook()` - —Å—Ç–∞–±–∏–ª—å–Ω—ã–π

### 2. Express middleware –∫—Ä–∏—Ç–∏—á–µ–Ω
```javascript
// ‚ùå –ë–ï–ó –≠–¢–û–ì–û –ö–ù–û–ü–ö–ò –ù–ï –†–ê–ë–û–¢–ê–Æ–¢!
app.use(express.json());
app.use(express.urlencoded({ extended: true }));
```

### 3. Health checks –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è Koyeb
```javascript
app.get('/health', (req, res) => {
  res.json({ status: 'ok' });
});
```

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
```javascript
if (req.body?.callback_query) {
  console.log('üìû Callback query:', req.body.callback_query.data);
}
```

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
bot/
‚îú‚îÄ‚îÄ package.json              ‚Üê express –¥–æ–±–∞–≤–ª–µ–Ω
‚îú‚îÄ‚îÄ welcome-message.js        ‚Üê webhook + –ø–∞—Ä—Å–∏–Ω–≥
‚îú‚îÄ‚îÄ Dockerfile                ‚Üê –ø–æ—Ä—Ç 8000
‚îî‚îÄ‚îÄ [7 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏]   ‚Üê –Ω–æ–≤—ã–µ
```

**Git –∫–æ–º–º–∏—Ç—ã**:
1. `b800b8e3` - Webhook —Ä–µ–∂–∏–º
2. `962b707` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
3. `0d1aeb0` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üß™ –¢–µ—Å—Ç-–∫–µ–π—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–®–∞–≥–∏**:
1. Telegram ‚Üí [@phuketgos_bot](https://t.me/phuketgos_bot)
2. –ö–æ–º–∞–Ω–¥–∞: `/start`
3. –ù–∞–∂–∞—Ç—å: "üéüÔ∏è –•–æ—á—É –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å!"
4. –í—ã–±—Ä–∞—Ç—å: "–ü—Ö–∏-–ü—Ö–∏ 2 –¥–Ω—è/1 –Ω–æ—á—å"
5. –í–≤–µ—Å—Ç–∏ –∏–º—è: "–¢–µ—Å—Ç"
6. –í–≤–µ—Å—Ç–∏ –¥–∞—Ç—É: "12 –¥–µ–∫–∞–±—Ä—è"
7. –ù–∞–∂–∞—Ç—å: "2 üë•" ‚Üê **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢**
8. –ù–∞–∂–∞—Ç—å: "–ù–µ—Ç –¥–µ—Ç–µ–π" ‚Üê **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢**
9. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
10. –ü–æ–ª—É—á–∏—Ç—å: "‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ —à–∞–≥–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π ‚úÖ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ë–æ—Ç**: [@phuketgos_bot](https://t.me/phuketgos_bot)  
**–ú–µ–Ω–µ–¥–∂–µ—Ä**: @Phuketga  
**–°–∞–π—Ç**: https://phukeo.com  
**Koyeb**: https://small-robinia-phukeo-8b5e1e16.koyeb.app

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ (Supabase/PostgreSQL)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å payment gateway (Thai QR/Credit Card)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –±–æ—Ç–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ç—É—Ä–æ–≤

---

**–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´! –ë–û–¢ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢! üéâ**

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 10 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã**: ~2 —á–∞—Å–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: Production-ready bot –Ω–∞ Koyeb ‚úÖ
