# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—É—Ä–æ–≤ –≤ Supabase CMS

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏](#–ø–æ—à–∞–≥–æ–≤—ã–π-–ø—Ä–æ—Ü–µ—Å—Å-–º–∏–≥—Ä–∞—Ü–∏–∏)
3. [API –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã](#api-–∏-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
4. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
5. [Best Practices –¥–ª—è Claude Sonnet 4.5](#best-practices-–¥–ª—è-claude-sonnet-45)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
TypeScript —Ñ–∞–π–ª—ã (src/data/tours/*.ts)
    ‚Üì
toursRegistry.ts (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ç—É—Ä–æ–≤)
    ‚Üì
useTours.ts (–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: TS + CMS)
    ‚Üì
useCMSTours.ts (—Ä–∞–±–æ—Ç–∞ —Å Supabase)
    ‚Üì
Supabase Database (tours, tour_gallery, tour_itinerary)
```

### –¢–∞–±–ª–∏—Ü—ã Supabase

#### 1. `tours` (–æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- **id**: UUID, primary key
- **title**: –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞
- **slug**: URL-—Å–ª–∞–≥ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π!)
- **description**: –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- **short_description**: –∫—Ä–∞—Ç–∫–æ–µ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
- **price_adult**: —Ü–µ–Ω–∞ –≤–∑—Ä–æ—Å–ª—ã–π (integer)
- **price_child**: —Ü–µ–Ω–∞ —Ä–µ–±—ë–Ω–æ–∫ (integer)
- **currency**: –≤–∞–ª—é—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é THB)
- **duration**: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **group_size**: —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã
- **highlights**: ARRAY —Ç–µ–∫—Å—Ç–æ–≤
- **included**: ARRAY (—á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ)
- **excluded**: ARRAY (—á—Ç–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ)
- **requirements**: ARRAY (—á—Ç–æ –≤–∑—è—Ç—å)
- **important_info**: ARRAY (–≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- **tags**: ARRAY (—Ç–µ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞)
- **is_active**: boolean
- **is_featured**: boolean
- **sort_order**: integer

#### 2. `tour_gallery` (—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏)
- **id**: UUID
- **tour_id**: UUID (—Å–≤—è–∑—å —Å tours)
- **image_url**: –ø–æ–ª–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **alt_text**: alt —Ç–µ–∫—Å—Ç –¥–ª—è SEO
- **caption**: –ø–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ
- **is_main**: –≥–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ (boolean)
- **sort_order**: –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

#### 3. `tour_itinerary` (–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞)
- **id**: UUID
- **tour_id**: UUID (—Å–≤—è–∑—å —Å tours)
- **day_number**: –Ω–æ–º–µ—Ä –¥–Ω—è
- **title**: –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è
- **description**: –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
- **activities**: ARRAY –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **sort_order**: –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–¶–µ–ª—å**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç—É—Ä –µ—â–µ –Ω–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Lovable**:
```javascript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º supabase--read-query
SELECT slug, title FROM public.tours WHERE slug = 'tour-slug-here';
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã**:
- ‚ùå –ï—Å–ª–∏ —Ç—É—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –ù–ï –ú–ò–ì–†–ê–¶–ò–†–û–í–ê–¢–¨ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- ‚úÖ –ï—Å–ª–∏ —Ç—É—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é
- ‚ö†Ô∏è –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—É—Ä—ã –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –®–ê–ì 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ TypeScript

**–û—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ**:
```
src/data/tours/[tour-name].ts  ‚Üê –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
src/data/toursRegistry.ts       ‚Üê –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (tags, priority, featured)
```

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å**:
1. **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**:
   - title, subtitle, slug
   - description, shortDescription
   - pricing (adult, child)
   - duration, groupSize
   
2. **–ú–∞—Å—Å–∏–≤—ã**:
   - highlights (–∫–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
   - included (—á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ)
   - excluded (—á—Ç–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ)
   - requirements (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
   - importantInfo (–≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
   
3. **–ì–∞–ª–µ—Ä–µ—è**:
   - images[] - –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å url, alt, caption
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å is_main –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–æ—Ç–æ
   
4. **–ü—Ä–æ–≥—Ä–∞–º–º–∞**:
   - itinerary[] - –º–∞—Å—Å–∏–≤ –¥–Ω–µ–π —Å title –∏ description

### –®–ê–ì 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SQL –º–∏–≥—Ä–∞—Ü–∏–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**:

```sql
-- –ò—Å–ø–æ–ª—å–∑—É–µ–º CTE (Common Table Expressions) –¥–ª—è —Å–≤—è–∑–∏ –¥–∞–Ω–Ω—ã—Ö
WITH new_tour AS (
  INSERT INTO public.tours (
    title,
    subtitle,
    slug,
    description,
    short_description,
    price_adult,
    price_child,
    currency,
    duration,
    group_size,
    difficulty_level,
    highlights,
    included,
    excluded,
    requirements,
    important_info,
    meta_title,
    meta_description,
    tags,
    is_active,
    is_featured,
    sort_order
  ) VALUES (
    '–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞',
    '–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫',
    'tour-slug',
    '–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ...',
    '–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ',
    2900,  -- —Ü–µ–Ω–∞ –≤–∑—Ä–æ—Å–ª—ã–π
    1900,  -- —Ü–µ–Ω–∞ —Ä–µ–±—ë–Ω–æ–∫
    'THB',
    '1 –¥–µ–Ω—å (08:00-17:00)',
    '–¥–æ 30 —á–µ–ª–æ–≤–µ–∫',
    '–ª–µ–≥–∫–∏–π',
    ARRAY['–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 1', '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 2'],  -- highlights
    ARRAY['–í–∫–ª—é—á–µ–Ω–æ 1', '–í–∫–ª—é—á–µ–Ω–æ 2'],        -- included
    ARRAY['–ù–µ –≤–∫–ª—é—á–µ–Ω–æ 1'],                    -- excluded
    ARRAY['–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1', '–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2'],     -- requirements
    ARRAY['–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ 1', '–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ 2'],  -- important_info
    'SEO –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Ç—É—Ä–∞',
    'SEO –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Ç—É—Ä–∞',
    ARRAY['—Ç–µ–≥1', '—Ç–µ–≥2', '—Ç–µ–≥3'],           -- tags
    true,   -- is_active
    false,  -- is_featured
    100     -- sort_order
  )
  RETURNING id
)

-- –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
INSERT INTO public.tour_gallery (tour_id, image_url, alt_text, caption, is_main, sort_order)
SELECT 
  new_tour.id,
  unnest(ARRAY[
    'https://domain.com/image1.jpg',
    'https://domain.com/image2.jpg',
    'https://domain.com/image3.jpg'
  ]) as image_url,
  unnest(ARRAY[
    'Alt —Ç–µ–∫—Å—Ç –¥–ª—è —Ñ–æ—Ç–æ 1',
    'Alt —Ç–µ–∫—Å—Ç –¥–ª—è —Ñ–æ—Ç–æ 2', 
    'Alt —Ç–µ–∫—Å—Ç –¥–ª—è —Ñ–æ—Ç–æ 3'
  ]) as alt_text,
  unnest(ARRAY[
    '–ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ 1',
    '–ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ 2',
    '–ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ 3'
  ]) as caption,
  unnest(ARRAY[true, false, false]) as is_main,  -- —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ –≥–ª–∞–≤–Ω–æ–µ
  unnest(ARRAY[1, 2, 3]) as sort_order
FROM new_tour;

-- –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç—É—Ä–∞
INSERT INTO public.tour_itinerary (tour_id, day_number, title, description, sort_order)
SELECT 
  new_tour.id,
  unnest(ARRAY[1, 2, 3]) as day_number,
  unnest(ARRAY[
    '–¢–æ—á–∫–∞ 1: –ù–∞–∑–≤–∞–Ω–∏–µ',
    '–¢–æ—á–∫–∞ 2: –ù–∞–∑–≤–∞–Ω–∏–µ',
    '–¢–æ—á–∫–∞ 3: –ù–∞–∑–≤–∞–Ω–∏–µ'
  ]) as title,
  unnest(ARRAY[
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ 1...',
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ 2...',
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ 3...'
  ]) as description,
  unnest(ARRAY[1, 2, 3]) as sort_order
FROM new_tour;
```

### –®–ê–ì 4: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Lovable**: `supabase--migration`

```javascript
// Lovable –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await lovable.tools.supabase_migration({
  query: "SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã—à–µ"
});
```

**–í–∞–∂–Ω–æ**:
- ‚úÖ Lovable –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQL –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ–¥–æ–±—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
- ‚úÖ –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ–¥–æ–±—Ä–µ–Ω–∏—è

### –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º**:

```sql
-- 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–∞
SELECT * FROM public.tours WHERE slug = 'tour-slug';

-- 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–∞–ª–µ—Ä–µ—é (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 6-8 —Ñ–æ—Ç–æ)
SELECT COUNT(*), tour_id FROM public.tour_gallery 
WHERE tour_id = (SELECT id FROM public.tours WHERE slug = 'tour-slug')
GROUP BY tour_id;

-- 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç—É—Ä–∞
SELECT COUNT(*), tour_id FROM public.tour_itinerary
WHERE tour_id = (SELECT id FROM public.tours WHERE slug = 'tour-slug')
GROUP BY tour_id;
```

---

## API –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### Lovable Tools –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase

#### 1. `supabase--read-query` 
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç—É—Ä–æ–≤
SELECT slug, title, id FROM public.tours WHERE is_active = true;

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç—É—Ä–∞
SELECT * FROM public.tour_gallery 
WHERE tour_id = 'uuid-here' 
ORDER BY sort_order;

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç—É—Ä–∞–º
SELECT 
  COUNT(*) as total_tours,
  COUNT(*) FILTER (WHERE is_featured = true) as featured_tours
FROM public.tours 
WHERE is_active = true;
```

#### 2. `supabase--migration`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ë–î

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (INSERT)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (UPDATE)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π/—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RLS –ø–æ–ª–∏—Ç–∏–∫

**–ü—Ä–æ—Ü–µ—Å—Å**:
1. AI –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç SQL
2. AI –≤—ã–∑—ã–≤–∞–µ—Ç `supabase--migration`
3. Lovable –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç SQL –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–¥–æ–±—Ä—è–µ—Ç
5. –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

#### 3. `supabase--linter`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ë–î

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
await lovable.tools.supabase_linter();
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**:
- RLS –≤–∫–ª—é—á–µ–Ω –Ω–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö?
- –ü–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ?
- –ù–µ—Ç –ª–∏ —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö?

#### 4. `lov-view`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```javascript
// –ß–∏—Ç–∞–µ–º —Ç—É—Ä –∏–∑ TypeScript
await lovable.tools.lov_view({
  file_path: "src/data/tours/phuket-sightseeing.ts"
});

// –ß–∏—Ç–∞–µ–º —Ä–µ–µ—Å—Ç—Ä —Ç—É—Ä–æ–≤
await lovable.tools.lov_view({
  file_path: "src/data/toursRegistry.ts",
  lines: "50-150"  // –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç—Ä–æ–∫
});
```

### Supabase Client (–≤ –∫–æ–¥–µ React)

```typescript
import { supabase } from "@/integrations/supabase/client";

// 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—É—Ä–æ–≤
const { data: tours, error } = await supabase
  .from('tours')
  .select(`
    *,
    tour_gallery (*),
    tour_itinerary (*)
  `)
  .eq('is_active', true)
  .order('sort_order');

// 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—É—Ä–∞ –ø–æ slug
const { data: tour } = await supabase
  .from('tours')
  .select(`
    *,
    tour_gallery (*),
    tour_itinerary (*)
  `)
  .eq('slug', 'tour-slug')
  .eq('is_active', true)
  .single();

// 3. –ü–æ–∏—Å–∫ —Ç—É—Ä–æ–≤ –ø–æ —Ç–µ–≥–∞–º
const { data: tours } = await supabase
  .from('tours')
  .select('*')
  .contains('tags', ['–≤–æ–¥–æ–ø–∞–¥—ã', '–ø—Ä–∏—Ä–æ–¥–∞'])
  .eq('is_active', true);
```

### Database Functions (–≥–æ—Ç–æ–≤—ã–µ)

```sql
-- 1. get_tour_with_gallery(tour_slug text)
-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—É—Ä —Å–æ –≤—Å–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
SELECT * FROM get_tour_with_gallery('phuket-sightseeing');

-- 2. get_all_tours()
-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—É—Ä—ã —Å –≥–ª–∞–≤–Ω—ã–º —Ñ–æ—Ç–æ
SELECT * FROM get_all_tours();
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

- [ ] –¢—É—Ä –µ—â–µ –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Supabase
- [ ] –ò–∑–≤–ª–µ—á–µ–Ω—ã –í–°–ï –¥–∞–Ω–Ω—ã–µ –∏–∑ TypeScript —Ñ–∞–π–ª–∞
- [ ] –°–æ–±—Ä–∞–Ω—ã –í–°–ï —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–º–∏–Ω–∏–º—É–º 6-8)
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ç—É—Ä–∞
- [ ] Slug —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–∞—Ä—à—Ä—É—Ç–æ–º
- [ ] –ú–∞—Å—Å–∏–≤—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –¶–µ–Ω—ã —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ —á–∏—Å–ª–∞
- [ ] SQL –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

### –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –¢—É—Ä –ø–æ—è–≤–∏–ª—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ tours
- [ ] –í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ tour_gallery
- [ ] –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ tour_itinerary
- [ ] –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ –æ—Ç–º–µ—á–µ–Ω–æ (is_main = true)
- [ ] –¢—É—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—É—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ slug
- [ ] –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

#### –û—à–∏–±–∫–∞ 1: Duplicate key
```
ERROR: duplicate key value violates unique constraint "tours_slug_key"
```

**–ü—Ä–∏—á–∏–Ω–∞**: –¢—É—Ä —Å —Ç–∞–∫–∏–º slug —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—É—Ä—ã
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π slug
3. –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç—É—Ä

#### –û—à–∏–±–∫–∞ 2: Malformed array literal
```
ERROR: malformed array literal
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –º–∞—Å—Å–∏–≤–∞

**–†–µ—à–µ–Ω–∏–µ**:
```sql
-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
ARRAY["—Ç–µ–∫—Å—Ç —Å '–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–º'"]

-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
ARRAY['—Ç–µ–∫—Å—Ç —Å ''–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–º''']
-- –∏–ª–∏
ARRAY[E'—Ç–µ–∫—Å—Ç —Å \'–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–º\'']
```

#### –û—à–∏–±–∫–∞ 3: –ù–µ—Ç —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
```
WARNING: Tour has no images in gallery
```

**–†–µ—à–µ–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º—É–º 6-8 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

---

## Best Practices –¥–ª—è Claude Sonnet 4.5

### 1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```markdown
1. ANALYZE: –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª —Ç—É—Ä–∞ –∏–∑ src/data/tours/
2. CHECK: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –≤ Supabase
3. EXTRACT: –ò–∑–≤–ª–µ—á—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–æ—Å–Ω–æ–≤–Ω—ã–µ + –º–∞—Å—Å–∏–≤—ã + –≥–∞–ª–µ—Ä–µ—è + –ø—Ä–æ–≥—Ä–∞–º–º–∞)
4. PREPARE: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å SQL —Å CTE
5. EXECUTE: –í—ã–∑–≤–∞—Ç—å supabase--migration
6. VERIFY: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### 2. –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**:
```sql
-- –î–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤
highlights = ARRAY[
  '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 1',
  '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 2',
  '–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 3'
]

-- –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–≤
ARRAY[
  '–¢–µ–∫—Å—Ç —Å ''–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–º''',
  '–ï—â–µ —Ç–µ–∫—Å—Ç —Å ''–∞–ø–æ—Å—Ç—Ä–æ—Ñ–æ–º'''
]
```

### 3. –†–∞–±–æ—Ç–∞ —Å –≥–∞–ª–µ—Ä–µ–µ–π

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞**:
- –ú–∏–Ω–∏–º—É–º 6-8 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –ü–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ is_main = true
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ is_main = false
- sort_order –æ—Ç 1 –¥–æ N
- alt_text –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ç–æ (SEO!)

**SQL –ø–∞—Ç—Ç–µ—Ä–Ω**:
```sql
INSERT INTO public.tour_gallery (tour_id, image_url, alt_text, caption, is_main, sort_order)
SELECT 
  new_tour.id,
  unnest(ARRAY[...]) as image_url,
  unnest(ARRAY[...]) as alt_text,
  unnest(ARRAY[...]) as caption,
  unnest(ARRAY[true, false, false, false]) as is_main,
  unnest(ARRAY[1, 2, 3, 4]) as sort_order
FROM new_tour;
```

### 4. –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π —Ç—É—Ä–∞

**–î–ª—è –æ–¥–Ω–æ–¥–Ω–µ–≤–Ω—ã—Ö —Ç—É—Ä–æ–≤**:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ day_number –¥–ª—è —Ç–æ—á–µ–∫ –º–∞—Ä—à—Ä—É—Ç–∞ (1, 2, 3...)
- title = –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏
- description = –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**SQL –ø–∞—Ç—Ç–µ—Ä–Ω**:
```sql
INSERT INTO public.tour_itinerary (tour_id, day_number, title, description, sort_order)
SELECT 
  new_tour.id,
  unnest(ARRAY[1, 2, 3, 4, 5]) as day_number,
  unnest(ARRAY[
    '–¢–æ—á–∫–∞ 1: –ù–∞–∑–≤–∞–Ω–∏–µ',
    '–¢–æ—á–∫–∞ 2: –ù–∞–∑–≤–∞–Ω–∏–µ',
    -- ...
  ]) as title,
  unnest(ARRAY[
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ 1...',
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–∫–∏ 2...',
    -- ...
  ]) as description,
  unnest(ARRAY[1, 2, 3, 4, 5]) as sort_order
FROM new_tour;
```

### 5. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**:
```sql
meta_title = '–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞ | Phuket Go',
meta_description = '–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –¥–æ 160 —Å–∏–º–≤–æ–ª–æ–≤',
tags = ARRAY['—Ç–µ–≥1', '—Ç–µ–≥2', '—Ç–µ–≥3']  -- –¥–ª—è –ø–æ–∏—Å–∫–∞
```

### 6. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å

**CTE –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç**:
- –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å: –ª–∏–±–æ –≤—Å–µ, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ
- –°–≤—è–∑–Ω–æ—Å—Ç—å: tour_id –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```sql
WITH new_tour AS (
  INSERT INTO tours (...) VALUES (...) RETURNING id
)
INSERT INTO tour_gallery (tour_id, ...) SELECT new_tour.id, ...;
INSERT INTO tour_itinerary (tour_id, ...) SELECT new_tour.id, ...;
```

### 7. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

**–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å vs –º–Ω–æ–∂–µ—Å—Ç–≤–æ**:
```sql
-- ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –û–¥–∏–Ω —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
WITH new_tour AS (...)
INSERT INTO tour_gallery ...,
INSERT INTO tour_itinerary ...;

-- ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
INSERT INTO tours ...;
-- –ø–æ–ª—É—á–∏—Ç—å id
INSERT INTO tour_gallery ...;
INSERT INTO tour_itinerary ...;
```

### 8. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã Claude Sonnet 4.5

```
STEP 1: –ü–æ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ‚Üì
STEP 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ (supabase--read-query)
  ‚Üì
STEP 3: –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (lov-view)
  ‚Üì
STEP 4: –ò–∑–≤–ª–µ—á—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
  ‚Üì
STEP 5: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é —Å CTE
  ‚Üì
STEP 6: –í—ã–∑–≤–∞—Ç—å supabase--migration
  ‚Üì
STEP 7: –î–æ–∂–¥–∞—Ç—å—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ‚Üì
STEP 8: –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  ‚Üì
STEP 9: –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
```

### 9. –û—Ç–ª–∞–¥–∫–∞ –∏ —Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü–æ–¥—Å—á–µ—Ç —Ç—É—Ä–æ–≤
SELECT COUNT(*) FROM public.tours WHERE is_active = true;

-- –¢—É—Ä—ã –±–µ–∑ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
SELECT t.slug, t.title 
FROM public.tours t
LEFT JOIN public.tour_gallery g ON t.id = g.tour_id
WHERE g.id IS NULL;

-- –¢—É—Ä—ã –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã
SELECT t.slug, t.title
FROM public.tours t
LEFT JOIN public.tour_itinerary i ON t.id = i.tour_id
WHERE i.id IS NULL;

-- –î—É–±–ª–∏–∫–∞—Ç—ã slug
SELECT slug, COUNT(*) 
FROM public.tours 
GROUP BY slug 
HAVING COUNT(*) > 1;
```

### 10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ RLS

**–¢–µ–∫—É—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏**:
- tours: –ß—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç—É—Ä–æ–≤
- tour_gallery: –ß—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö
- tour_itinerary: –ß—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö
- bookings: –°–æ–∑–¥–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö, —á—Ç–µ–Ω–∏–µ —Å–≤–æ–∏—Ö

**–í–∞–∂–Ω–æ**: –ù–µ –∏–∑–º–µ–Ω—è—Ç—å RLS –±–µ–∑ —è–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞!

---

## –ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π —Ç—É—Ä –±–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```sql
WITH new_tour AS (
  INSERT INTO public.tours (
    title, slug, description, price_adult, price_child, 
    currency, duration, group_size, is_active
  ) VALUES (
    '–ü—Ä–æ—Å—Ç–æ–π —Ç—É—Ä',
    'simple-tour',
    '–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞',
    2000, 1000,
    'THB', '1 –¥–µ–Ω—å', '–¥–æ 20 —á–µ–ª–æ–≤–µ–∫', true
  ) RETURNING id
)
INSERT INTO public.tour_gallery (tour_id, image_url, alt_text, is_main, sort_order)
SELECT new_tour.id, unnest(ARRAY['url1', 'url2']), 
       unnest(ARRAY['alt1', 'alt2']),
       unnest(ARRAY[true, false]),
       unnest(ARRAY[1, 2])
FROM new_tour;
```

### –ü—Ä–∏–º–µ—Ä 2: –¢—É—Ä —Å –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π

```sql
WITH new_tour AS (
  INSERT INTO public.tours (
    -- –≤—Å–µ –ø–æ–ª—è...
  ) VALUES (...) RETURNING id
)
-- –≥–∞–ª–µ—Ä–µ—è
INSERT INTO tour_gallery (...) SELECT ...,
-- –ø—Ä–æ–≥—Ä–∞–º–º–∞
INSERT INTO tour_itinerary (
  tour_id, day_number, title, description, sort_order
) SELECT 
  new_tour.id,
  unnest(ARRAY[1, 2, 3, 4, 5, 6, 7, 8]),
  unnest(ARRAY['–î–µ–Ω—å 1', '–î–µ–Ω—å 2', ...]),
  unnest(ARRAY['–û–ø–∏—Å–∞–Ω–∏–µ 1', '–û–ø–∏—Å–∞–Ω–∏–µ 2', ...]),
  unnest(ARRAY[1, 2, 3, 4, 5, 6, 7, 8])
FROM new_tour;
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ —Ñ–æ—Ç–æ, –≤—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –≤—Å–µ –º–∞—Å—Å–∏–≤—ã
2. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ–º CTE –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç–∏
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ –∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ —É–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
5. **SEO**: –í—Å–µ–≥–¥–∞ –∑–∞–ø–æ–ª–Ω—è–µ–º meta_title, meta_description, alt_text
6. **–ö–∞—á–µ—Å—Ç–≤–æ**: –ú–∏–Ω–∏–º—É–º 6-8 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç—É—Ä–∞

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

- [ ] –ü–æ–Ω–∏–º–∞—é –ª–∏ —è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Ç–∞–±–ª–∏—Ü?
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–∏ —è –Ω–∞–ª–∏—á–∏–µ —Ç—É—Ä–∞ –≤ –ë–î?
- [ ] –ò–∑–≤–ª–µ–∫ –ª–∏ —è –í–°–ï –¥–∞–Ω–Ω—ã–µ –∏–∑ TypeScript?
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª –ª–∏ —è –í–°–ï —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏?
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ª–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –∞–ø–æ—Å—Ç—Ä–æ—Ñ—ã?
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é –ª–∏ —è CTE –¥–ª—è —Å–≤—è–∑–∏ –¥–∞–Ω–Ω—ã—Ö?
- [ ] –ì–æ—Ç–æ–≤ –ª–∏ SQL –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é?

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `supabase--linter` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
4. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-07  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–ª—è**: Claude Sonnet 4.5 –∏ –¥—Ä—É–≥–∏—Ö AI –∞–≥–µ–Ω—Ç–æ–≤
